{% extends '::base.html.twig' %}

{% block header %}
    <div id="carousel-index" class="carousel slide carousel-index" data-ride="carousel" data-interval="4000">

        <ol class="carousel-indicators">
            {% for i, c in carousel_slides() %}
                <li data-target="#carousel-index" data-slide-to="{{ i }}" class="{% if i == 0 %}active{% endif %}"></li>
            {% endfor %}
        </ol>
        <div class="carousel-inner">
            {% for i, c in carousel_slides() %}
                <div class="item{% if i == 0 %} active{% endif %}"><img src="{{ asset_carousel(c.getImage) | imagine_filter('carousel') }}" alt=""></div>
            {% endfor %}
        </div>

        <a class="left carousel-control" href="#carousel-index" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="right carousel-control" href="#carousel-index" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
        </a>
    </div>

    <div class="promo">
        <div class="container">
            <a href="{{ path(block_prop('page.home.banner', 'route')) }}" class="pull-right btn btn-primary">{{ block_title('page.home.banner') }} <i class="fa fa-long-arrow-right"></i></a>
            {{ block_content('page.home.banner') }}
        </div>
    </div>
{% endblock %}

{% block body %}

    <div class="container container-sr">

        <h2 class="primary-hr-i"><i class="fa fa-star"></i> Featured <em>Products</em></h2>
        <div class="card-listing">

            {% for feature in featured %}
                <div class="card-index-product">
                    <div class="card is-linkable is-animated" data-href="{{ path('app_product_view', {'productName': feature.getName|slugify, 'product': feature.getId}) }}">
                        <div class="card-section-head is-overlay is-toggleable">
                            <div class="product-price abs-right">
                                <p>${{ feature.getPrice|number_format(2, '.', ',') }}</p>
                            </div>
                            <div class="product-name">
                                <h4>{{ feature.getName }}</h4>
                            </div>
                        </div>
                        <div class="card-section-body">
                            <img alt="{{ feature.getName }}" src="{{ asset_product(feature.getImage) | imagine_filter('product_thumbs') }}"/>
                        </div>

                        <div class="card-section-foot is-overlay is-toggleable">
                            <div class="product-link">
                                <a href="{{ path('app_product_view', {'productName': feature.getName|slugify, 'product': feature.getId}) }}">
                                    View Item <i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}

        </div>
        <a href="{{ path('app_category_list') }}" class="pull-right btn btn-primary">View All Products <i class="fa fa-long-arrow-right"></i></a>
    </div>

    <div class="container-sr-odd">
        <div class="container">
            <h2 class="primary-hr-i"><i class="fa fa-facebook-official"></i> Shared <em>Photos</em></h2>
            <div class="card-listing">

                {% for i, f in feed if i < 12 %}
                    <div class="card-feed-photo">
                        <div class="card is-linkable is-animated" data-href="{{ url('app_feed_view', {_fragment: f.getId}) }}">
                            {% if f.isVideo %}
                                <div class="card-section-head is-overlay">
                                    <span class="fa-stack fa-lg">
                                      <i class="fa fa-circle fa-stack-2x"></i>
                                      <i class="fa fa-youtube-play fa-stack-1x fa-inverse"></i>
                                    </span>
                                </div>
                            {% else %}
                                <div class="card-section-head is-overlay">
                                    <span class="fa-stack fa-lg">
                                      <i class="fa fa-circle fa-stack-2x"></i>
                                      <i class="fa fa-expand fa-stack-1x fa-inverse"></i>
                                    </span>
                                </div>
                            {% endif %}
                            <div class="card-section-body">
                                {% if f.getAttachments|first.getMedia|first %}
                                    {% set media = f.getAttachments|first.getMedia|first %}
                                {% else %}
                                    {% set media = f.getAttachments|first.getSubattachments|first.getMedia|first %}
                                {% endif %}

                                <img class="feed-attachment" src="{{ media.getLink() | url_to_file | imagine_filter('feed_photo_thumbs')  }}" alt="{{ f.getMessage }}" />
                            </div>

                            <div class="card-section-foot is-overlay is-toggleable">
                                <p class="feed-type">
                                    {% if f.isVideo %}
                                        <i class="fa-youtube-play fa"></i> View video
                                    {% else %}
                                        <i class="fa-picture-o fa"></i>    View album
                                    {% endif %}

                                    <i class="fa fa-long-arrow-right"></i>
                                </p>
                            </div>

                        </div>
                    </div>
                {% endfor %}

            </div>
            <a href="{{ path('app_feed_view') }}" class="pull-right btn btn-primary">View All Shared Items <i class="fa fa-long-arrow-right"></i></a>
        </div>
    </div>

    <div class="container container-sr">

        <div class="index-about">

            <div class="index-about-section">
                <h3 class="primary-hr-i"><i class="fa fa-clock-o"></i> Our <em>Hours</em></h3>

                <dl class="info-hours">
                    {% for hour in hours %}
                        <dt {% if hour.dowToday %}class="today"{% endif %}>
                            {{ hour.getDow }}
                            {% if hour.dowToday %}<span class="today">(today)</span>{% endif %}
                        </dt>
                        <dd {% if hour.dowToday %}class="today"{% endif %}>
                            {% if hour.isClosed %}
                                Closed
                            {% else %}
                                {{ hour.getTimeOpen.format('h:ia') }} - {{ hour.getTimeClose.format('h:ia') }}
                            {% endif %}
                        </dd>
                    {% endfor %}
                </dl>
            </div>

            <div class="index-about-section index-about-section-phone">
                <h3 class="primary-hr-i"><i class="fa fa-phone"></i> {{ block_title('about.phone') }}</h3>

                <div class="info-phone">
                    {{ block_content('about.phone') }}
                </div>
            </div>

            <div class="index-about-section">
                <h3 class="primary-hr-i"><i class="fa fa-map"></i> {{ block_title('about.address') }}</h3>

                <div class="info-address">
                    <img class="img-responsive" src="{{ staticMaps }}" alt="{{ block_content('about.address') }}" />
                </div>

                <a href="{{ url('app_location') }}" class="btn btn-default">Info and Directions <i class="fa fa-long-arrow-right"></i></a>
            </div>

        </div>

    </div>
{% endblock %}
