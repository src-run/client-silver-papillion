{% extends '::base.html.twig' %}

{% block header %}
    <div id="carousel-index" class="carousel slide carousel-index" data-ride="carousel" data-interval="4000">

        <ol class="carousel-indicators">
            <li data-target="#carousel-index" data-slide-to="0" class="active"></li>
            <li data-target="#carousel-index" data-slide-to="1"></li>
            <li data-target="#carousel-index" data-slide-to="2"></li>
            <li data-target="#carousel-index" data-slide-to="3"></li>
            <li data-target="#carousel-index" data-slide-to="4"></li>
            <li data-target="#carousel-index" data-slide-to="5"></li>
            <li data-target="#carousel-index" data-slide-to="6"></li>
            <li data-target="#carousel-index" data-slide-to="7"></li>
        </ol>

        <div class="carousel-inner">
            <div class="item active">
                <img src="{{ asset('bundles/app/images/store/store-front-sign.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-front-table.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-inside-display-01.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-inside-cases-01.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-inside-cases-02.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-inside-wall-3.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/nearby-bridge.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
            <div class="item">
                <img src="{{ asset('bundles/app/images/store/store-front-wide.jpg') | imagine_filter('carousel') }}" alt="">
            </div>
        </div>

        <a class="left carousel-control" href="#carousel-index" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="right carousel-control" href="#carousel-index" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
        </a>
    </div>

    <div class="promo">
        <div class="container">
            <a href="{{ path(block_prop('page.home.banner', 'route')) }}" class="pull-right btn btn-primary">{{ block_title('page.home.banner') }} <i class="fa fa-long-arrow-right"></i></a>
            {{ block_content('page.home.banner') }}
        </div>
    </div>
{% endblock %}

{% block body %}

    <div class="container container-sr">

        <h2 class="primary-hr-i">Featured <em>Products</em></h2>
        <div class="card-listing">

            {% for feature in featured %}
                <div class="card-product">
                    <div class="card is-linkable is-animated" data-href="{{ path('app_product_view', {'productName': feature.getName|slugify, 'product': feature.getId}) }}">
                        <div class="card-section-head is-overlay is-toggleable">
                            <div class="product-price abs-right">
                                <p>${{ feature.getPrice|number_format(2, '.', ',') }}</p>
                            </div>
                            <div class="product-name">
                                <h4>{{ feature.getName }}</h4>
                            </div>
                        </div>
                        <div class="card-section-body">
                            <img alt="{{ feature.getName }}" src="{{ asset_product(feature.getImage) | imagine_filter('product_thumbs') }}"/>
                        </div>

                        <div class="card-section-foot is-overlay is-toggleable">
                            <div class="product-link">
                                <a href="{{ path('app_product_view', {'productName': feature.getName|slugify, 'product': feature.getId}) }}">
                                    View Item <i class="fa fa-long-arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}

        </div>
    </div>

    <div class="container-sr-odd">
        <div class="container">
            <h2 class="primary-hr-i">Shared <em>Photos</em></h2>
            <div class="card-listing">

                {% for i, f in feed if i < 12 %}
                    <div class="card-feed-photo">
                        <div class="card is-linkable is-animated" data-href="{{ url('app_feed_view', {_fragment: f.getId}) }}">

                            <div class="card-section-body">
                                {% if f.getAttachments|first.getMedia|first %}
                                    {% set media = f.getAttachments|first.getMedia|first %}
                                {% else %}
                                    {% set media = f.getAttachments|first.getSubattachments|first.getMedia|first %}
                                {% endif %}

                                <img class="feed-attachment" src="{{ media.getLink() | url_to_file | imagine_filter('feed_photo_thumbs')  }}" alt="{{ f.getMessage }}" />
                            </div>

                            <div class="card-section-foot is-overlay is-toggleable">
                                <p class="feed-type">
                                    {% if f.isVideo %}
                                        <i class="fa-youtube-play fa"></i> View video
                                    {% else %}
                                        <i class="fa-picture-o fa"></i>    View album
                                    {% endif %}

                                    <i class="fa fa-long-arrow-right"></i>
                                </p>
                            </div>

                        </div>
                    </div>
                {% endfor %}

            </div>
            <a href="{{ path('app_feed_view') }}" class="pull-right btn btn-primary">View All Shared Items <i class="fa fa-long-arrow-right"></i></a>
        </div>
    </div>

    <div class="container container-sr">

        <div class="row">
            <div class="col-sm-4">
                <h2 class="primary-hr-i">{{ block_title('about.address') }}</h2>
                <div class="info-address">
                    {{ block_content('about.address') }}
                </div>
                <a href="{{ url('app_about') }}" class="btn btn-default">More About Us <i class="fa fa-long-arrow-right"></i></a>
            </div>

            <div class="col-sm-4">
                <h2 class="primary-hr-i">{{ block_title('about.phone') }}</h2>
                <div class="info-phone">
                    {{ block_content('about.phone') }}
                </div>
            </div>

            <div class="col-sm-4">
                <h2 class="primary-hr-i">Our <em>Hours</em></h2>
                <ul class="list-unstyled info-hours">
                    {% for hour in hours %}
                        <li {% if hour.dowToday %}class="today"{% endif %}>
                            {% if hour.isClosed %}
                                <strong>closed</strong>
                            {% else %}
                                {{ hour.getTimeOpen.format('h:ia') }} - {{ hour.getTimeClose.format('h:ia') }}
                            {% endif %}
                            <em>{{ hour.getDow }}</em>
                            {% if hour.dowToday %}<span class="today">(today's hours)</span>{% endif %}
                        </li>
                    {% endfor %}
                </ul>
            </div>

        </div>

        <!--
        <h2>Contact Us</h2>
        <div class="row">
            <div class="col-sm-9">
                {{ form_start(form) }}
                {{  form_end(form) }}
            </div>
            <div class="col-sm-3">
                <p>Need to contact us?</p>
            </div>
        </div>
        -->

    </div>
{% endblock %}
