
{#
 # complete fb feed listing
 #}

{% set i = 0 %}
{% for f in feed %}
    {% for a in f.getAttachments if i < count %}

        {% if a.isAlbum() %}
            {% for p in a.getPhotos() %}
                {% set i = i + 1 %}
                {% set thumb = p.getFormatGreaterThan(1200, true).getLink() %}
                {% set href  = p.getFormatGreaterThan(2400, true).getLink() %}
                {% include 'AppBundle:fragment:feed-attachment.html.twig' with { 'f' : f, 'a' : p, 'thumb' : thumb, 'href' : href } only %}
            {% endfor %}
        {% elseif a.isPhoto() %}
            {% set i = i + 1 %}
            {% set thumb = a.getFormatGreaterThan(1200, true).getLink() %}
            {% set href  = a.getFormatGreaterThan(2400, true).getLink() %}
            {% include 'AppBundle:fragment:feed-attachment.html.twig' with { 'f' : f, 'a' : a, 'thumb' : thumb, 'href' : href } only %}
        {% elseif a.isVideo() %}
            {% set i = i + 1 %}
            {% set thumb = a.getThumbGreaterThan(1200, true) %}
            {% set href  = url('app_fragment_feed_video', { post : f.getId(), video : a.getId() }) %}
            {% include 'AppBundle:fragment:feed-attachment.html.twig' with { 'f' : f, 'a' : a, 'thumb' : thumb, 'href' : href } only %}
        {% endif %}

    {% endfor %}
{% endfor %}
